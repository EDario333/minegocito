{% load i18n static %}

<aside id="rightsidebar" class="right-sidebar">
  <ul class="nav nav-tabs tab-nav-right" role="tablist">
	  <li role="presentation" class="active">
	  	<a href="#skins" data-toggle="tab">
	  		{% trans 'Skins'|upper %}
	  	</a>
	  </li>

	  <li role="presentation">
	  	<a href="#settings" data-toggle="tab">
	  		{% trans 'Settings'|upper %}
	  	</a>
	  </li>
  </ul>

  <div class="tab-content">
    <div role="tabpanel" id="skins"
    class="tab-pane fade in active in active">
      <ul class="demo-choose-skin">
	      <li data-theme="red">
          <div class="red"></div>
          <span>{% trans 'Red' %}</span>
	      </li>

	      <li data-theme="pink">
          <div class="pink"></div>
          <span>{% trans 'Pink' %}</span>
	      </li>

	      <li data-theme="purple">
          <div class="purple"></div>
          <span>{% trans 'Purple' %}</span>
	      </li>

	      <li data-theme="deep-purple">
          <div class="deep-purple"></div>
          <span>{% trans 'Deep Purple' %}</span>
	      </li>

	      <li data-theme="indigo">
          <div class="indigo"></div>
          <span>{% trans 'Indigo' %}</span>
	      </li>

	      <li data-theme="blue">
          <div class="blue"></div>
          <span>{% trans 'Blue' %}</span>
	      </li>

	      <li data-theme="light-blue">
          <div class="light-blue"></div>
          <span>{% trans 'Light Blue' %}</span>
	      </li>

	      <li data-theme="cyan">
          <div class="cyan"></div>
          <span>{% trans 'Cyan' %}</span>
	      </li>

	      <li data-theme="teal">
          <div class="teal"></div>
          <span>{% trans 'Teal' %}</span>
	      </li>

	      <li data-theme="green">
          <div class="green"></div>
          <span>{% trans 'Green' %}</span>
	      </li>

	      <li data-theme="light-green">
          <div class="light-green"></div>
          <span>{% trans 'Light Green' %}</span>
	      </li>

	      <li data-theme="lime">
          <div class="lime"></div>
          <span>{% trans 'Lime' %}</span>
	      </li>

	      <li data-theme="yellow">
          <div class="yellow"></div>
          <span>{% trans 'Yellow' %}</span>
	      </li>

	      <li data-theme="amber">
          <div class="amber"></div>
          <span>{% trans 'Amber' %}</span>
	      </li>

	      <li data-theme="orange">
          <div class="orange"></div>
          <span>{% trans 'Orange' %}</span>
	      </li>

	      <li data-theme="deep-orange">
          <div class="deep-orange"></div>
          <span>{% trans 'Deep Orange' %}</span>
	      </li>

	      <li data-theme="brown">
          <div class="brown"></div>
          <span>{% trans 'Brown' %}</span>
	      </li>

	      <li data-theme="grey">
          <div class="grey"></div>
          <span>{% trans 'Grey' %}</span>
	      </li>

	      <li data-theme="blue-grey">
          <div class="blue-grey"></div>
          <span>{% trans 'Blue Grey' %}</span>
	      </li>

	      <li data-theme="black">
          <div class="black"></div>
          <span>{% trans 'Black' %}</span>
	      </li>
      </ul>
    </div>

    <div role="tabpanel" class="tab-pane fade" id="settings">
      <div class="demo-settings">
        <!-- 
        <p>
        	{% trans 'General settings'|upper %}
        </p>

        <ul class="setting-list">
          <li>
	          <span>
	          	{% trans 'Report Panel Usage' %}
	          </span>

	          <div class="switch">
              <label>
              	<input type="checkbox" checked>
              	<span class="lever"></span>
              </label>
	          </div>
          </li>

          <li>
	          <span>
	          	{% trans 'Email Redirect' %}
	          </span>

	          <div class="switch">
              <label>
              	<input type="checkbox">
              	<span class="lever"></span>
              </label>
	          </div>
          </li>
        </ul>
 -->
        <p>
        	{% trans 'System settings'|upper %}
        </p>

        <ul class="setting-list">
	        <li>
	          <span>
	          	{% trans 'Notifications' %}
	          </span>

	          <div class="switch">
              <label>
              	{% if my_user.show_notifications %}
                  <input type="checkbox" 
                  id="chkShowNotifications" checked>
                {% else %}
                  <input type="checkbox" 
                  id="chkShowNotifications">
                {% endif %}
              	<span class="lever"></span>
              </label>
	          </div>
	        </li>

          <li>
            <span>
              {% trans 'Tasks' %}
            </span>

            <div class="switch">
              <label>
                {% if my_user.show_tasks %}
                  <input type="checkbox" id="chkShowTasks" checked>
                {% else %}
                  <input type="checkbox" id="chkShowTasks">
                {% endif %}
                <span class="lever"></span>
              </label>
            </div>
          </li>

	        <li>
            <span>
            	{% trans 'Auto Updates' %}
            </span>

            <div class="switch">
              <label>
                {% if my_user.automatic_updates %}
                  <input type="checkbox" 
                  id="chkAutoUpdates" checked>
                {% else %}
                  <input type="checkbox" id="chkAutoUpdates">
                {% endif %}
              	<span class="lever"></span>
              </label>
            </div>
	        </li>
        </ul>
<!-- 
        <p>
        	{% trans 'Account settings'|upper %}
        </p>

        <ul class="setting-list">
          <li>
            <span>
            	{% trans 'Offline' %}
            </span>

            <div class="switch">
              <label>
              	<input type="checkbox">
              	<span class="lever"></span>
              </label>
            </div>
          </li>

          <li>
            <span>
            	{% trans 'Location Permission' %}
            </span>

            <div class="switch">
              <label>
              	<input type="checkbox" checked>
              	<span class="lever"></span>
              </label>
            </div>
          </li>
        </ul>
 -->
      </div>
    </div>
  </div>
</aside>

{% block js_footer %}
<script src="{% static 'js/utils.js' %}"></script>

<script type="text/javascript">
  var msg_wait=retrieveWaitMsg();

  $(document).ready(function(){
    $.ajax({
      method: "GET",
      url: "/users/admin/load-my-top-bar-theme"
    })
    .done(function(result) {
      if (result.status == "success") {
        //$("div#skins ul li[data-theme='" + result.theme + "']").click();
        $("div#skins ul li[data-theme='" + result.theme + "']").addClass("active");
        $("body").addClass('theme-' + result.theme);
      }
      else {
        show_msg_with_toastr(result.level, result.msg);
        $("div#skins ul li[data-theme='red']").addClass("active");
        $("body").addClass('theme-red');
      }
    });

    $("div#skins ul li").click(function() {
      theme = $(this).attr("data-theme");
      $.ajax({
        method: "GET",
        url: "/users/admin/change-top-bar-theme/",
        data: { theme: theme}
      })
      .done(function(result) {
        // nothing to do
      });
    });

    $("#chkShowNotifications").change(function() {
      show_msg_with_toastr("info", msg_wait);

      show=this.checked;

      $.ajax({
        method: "GET",
        url: "/notifications/change-cfg/",
        data: {show_notifications: show}
      })
      .done(function(result) {
        toastr.clear();
        if (result.status!="success")
          show_msg_with_toastr(result.status, result.msg);
        if (!show)
          $("li.user-notifications").hide();
        else
          $("li.user-notifications").show();
      });
    });

    $("#chkShowTasks").change(function() {
      show_msg_with_toastr("info", msg_wait);

      show=this.checked;

      $.ajax({
        method: "GET",
        url: "/tasks/change-cfg/",
        data: {show_tasks: show}
      })
      .done(function(result) {
        toastr.clear();
        if (result.status!="success")
          show_msg_with_toastr(result.status, result.msg);
        if (!show)
          $("li.user-tasks").hide();
        else
          $("li.user-tasks").show();
      });
    });

    $("#chkAutoUpdates").change(function() {
      show_msg_with_toastr("info", msg_wait);

      $.ajax({
        method: "GET",
        url: "/users/admin/automatic-updates/",
        data: {automatic_updates: this.checked}
      })
      .done(function(result) {
        toastr.clear();
        if (result.status!="success")
          show_msg_with_toastr(result.status, result.msg);
      });
    });
  });
</script>
{% endblock %}